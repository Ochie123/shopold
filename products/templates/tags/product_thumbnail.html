{%load static %}

  <style>


      * {



}



.img-containere {
   position: relative;
   overflow:hidden;
   height: 150px;
}

.img-containere img {
  position: absolute;
  top:0;
  left:0;
  width: 100%;
  height:100%;
  object-fit: cover;
}
      </style>
  
  <div class="med-related-prod-wrap" id="med-related-prod-wrapper">

      <div class="med-rel-prod-slider-wrapper">
          <div class="med-rel-prod-slider carousel-content">
  



            {% for p in products %}             
            <div class="med-product-card">
              <div class="pad15">
                <div className="pad15">
                  <a href="{{ p.get_absolute_url }}">
                   <div class="img-containere">
                    {% for ima in p.productimage_set.all %}
                    <img src="{{ ima.image.url }}" alt="cover">
                    {% endfor %}
                  </div>
                  <div class="pad15">
                <h5 class="card-title"><a href="{{ p.get_absolute_url }}"> {{ p.title | truncatechars:30 }}</a> </h5>
                <ul class="product_price list-unstyled">
                 
                  <li class="new_price">$ {{ p.price }}</li>
              </ul>
              </div>
                  </a>
              </div>
              </div>
          </div>
          {% endfor %}

  

  
  

          </div>
          <div class="med-slider-arrow-section">
              <button class="med-slider-prev med-slider-arrow btn-left" aria-label="left-arrow" onclick="" id="med-btn-left" type="button"></button>
              <button class="med-slider-next med-slider-arrow btn-right" aria-label="right-arrow" onclick="" id="med-btn-right" type="button"></button>
          </div>
      </div>
  </div>
  
  <script>
      const bindCarouselEvents = (containerId) => {
          const wrapper = document.getElementById(containerId);
          const btn_left = wrapper.getElementsByClassName('btn-left')[0]
          const btn_right = wrapper.getElementsByClassName('btn-right')[0]
          const content = wrapper.getElementsByClassName('carousel-content')[0]
          const content_scroll_width = content.scrollWidth;
          let content_scoll_left = content.scrollLeft;
          if (btn_right) {
              btn_right.addEventListener('click', () => {
                  content_scoll_left += 224;
                  if (content_scoll_left >= content_scroll_width) { 
                      content_scoll_left = content_scroll_width;
                  }
                  content.scrollLeft = content_scoll_left;
              });
          }
          if (btn_left) {
              btn_left.addEventListener('click', () => {
                  content_scoll_left -= 224;
                  content.scrollLeft = content_scoll_left;
              });
          }
  
          // scroll binding
          content.addEventListener('scroll', () => {
              let scrollLeft = Math.ceil(content.scrollLeft)
              let contentScrollWidth = content.scrollWidth
              let contentWidth = content.clientWidth
              let rightEdge = (contentScrollWidth - contentWidth)
              if (scrollLeft >= rightEdge) {
                  btn_right.style.display = "none"
              } else if (scrollLeft < rightEdge) {
                  btn_right.style.display = "block"
              }
  
              if (scrollLeft == 0) {
                  btn_left.style.display = "none"
              } else if (scrollLeft > 0) {
                  btn_left.style.display = "block"
              }
  
              content_scoll_left = scrollLeft
          });
      }
  
      // javascript for scroll on click
      window.addEventListener('DOMContentLoaded', function(){
          bindCarouselEvents('med-related-prod-wrapper')
      });
      </script>
  
 

